<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Contact Me – Patstar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- ✅ Added Fonts and Script for Consistency -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Edu+VIC+WA+NT+Hand+Pre&family=Savate:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" defer></script>

    <style>
      /* ✅ Styling for the buttons */
      .fb-button, .app-button {
        display: inline-block;
        margin-top: 15px;
        padding: 12px 20px;
        background-color: #1877f2; /* Default blue for app button */
        color: #fff;
        font-size: 16px;
        font-weight: bold;
        text-decoration: none;
        border-radius: 6px;
        text-align: center;
        border: none;
        cursor: pointer;
      }
      .fb-button:hover, .app-button:hover {
        background-color: #145dbf;
      }
    </style>
</head>

<body class="contact-page" style="padding: 0;">
    <nav>
        <ul class="topnav" id="DropdownClick">
            <li><a href="index.html">Home</a></li>
            <li><a href="About.html">About</a></li>
            <li><a href="News.html">News</a></li>
            <li><a href="contactme.html">Contact Me</a></li>
            <li class="topnav-right"><a href="Signup.html">Sign Up</a></li>
            <li class="topnav-right"><a href="Signin.html">Sign In</a></li>
            <li class="DropdownIcon"><a href="javascript:void(0);" onclick="dropdownMen()">&#9776;</a></li>
        </ul>
    </nav>

    <script>
        function dropdownMen() {
            var x = document.getElementById("DropdownClick");
            if (x.className === "topnav") {
                x.className += " responsive";
            } else {
                x.className = "topnav";
            }
        }
    </script>

    <h1>Contact Me</h1>
    <p class="freemessage">Feel free to send a message!</p>

    <form id="contactForm" class="contact-form">
        <input type="text" name="name" placeholder="Your name" required />
        <input type="email" name="_replyto" placeholder="Your email" required />
        <textarea name="message" placeholder="Your message" required></textarea>
        <button type="submit">Send</button>
    </form>

    <a href="index.html">
        <button class="contact-btn">Return Home</button>
    </a>

    <!-- ✅ Universal “Open Omni App” button -->
    <button class="app-button" id="openAppBtn">Open Omni App</button>

    <script>
        // Contact Form Submission Script
        const form = document.getElementById('contactForm');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = new FormData(form);

            try {
                const response = await fetch('https://formspree.io/f/xzzgzvrr', {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json'
                    },
                    body: formData
                });

                if (response.ok) {
                    window.location.href = 'https://patstar.me/index.html';
                } else {
                    alert('Oops! There was a problem submitting your form.');
                }
            } catch (error) {
                alert('Oops! There was a problem submitting your form.');
            }
        });

        // ✅ Universal “Open App or Fallback” Script
        const openAppBtn = document.getElementById('openAppBtn');

        const appScheme = 'omni://'; // Replace with Omni app URI scheme if known
        const fallbackWeb = 'https://www.omni.com/'; // Replace with website or App Store link

        openAppBtn.addEventListener('click', function() {
            const start = Date.now();
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            iframe.src = appScheme;
            document.body.appendChild(iframe);

            setTimeout(function() {
                const end = Date.now();
                if (end - start < 2000) {
                    window.location.href = fallbackWeb;
                }
                document.body.removeChild(iframe);
            }, 1500);
        });
    </script>
</body>
</html>